const z={q1:"sterilizacija",q2:"bojenje",q3:"podloge",q4:"mikroskopija",q5:"voda-analiza",q6:"bakterije-azotobacter",q7:"temperatura",q8:"bolesti",q9:"temperatura",q10:"bakterije-clostridium",q11:"sterilizacija",q12:"podloge",q13:"fiksatori-dusika",q14:"sterilizacija",q15:"bakterije-azotobacter",q16:"mikrobiologija-kvantitativna",q17:"mikrobiologija-kvantitativna",q18:"bojenje",q19:"bojenje",q20:"testovi",q21:"podloge",q22:"mediji",q23:"bakterije-azotobacter",q24:"testovi"},f={q1:["a","b","d"],q2:["b","e"],q3:["a","e"],q4:["b","d","e"],q5:["b","d"],q6:["c","e"],q7:["c"],q8:["b","c","e"],q9:["c"],q10:["b","d","e"],q11:["c"],q12:["b","c","d"],q13:["b","c","e"],q14:["b","e"],q15:["a","c","d"],q16:["b"],q17:["d"],q18:["a","b"],q19:["c","d","e"],q20:["a"],q21:["a","b","c","d"],q22:["a","b"],q23:["a","c"],q24:["c"]},E=Object.keys(f).length;let m=30*60,j=null,q=0,T=Date.now();const y={firstTry:{icon:"üéØ",title:"Prvi poku≈°aj",description:"Zavr≈°ili ste svoj prvi kviz!"},perfectScore:{icon:"üíé",title:"Perfekcionista",description:"Postigli ste 100% uspje≈°nost!"},speedRunner:{icon:"‚ö°",title:"Brzinac",description:"Zavr≈°ili ste kviz u manje od 15 minuta!"},goodScore:{icon:"ü•á",title:"Odliƒçnjak",description:"Postigli ste preko 90% uspje≈°nost!"}},A={sterilizacija:"Sterilizacija",bojenje:"Bojenje bakterija",podloge:"Hranjive podloge",mikroskopija:"Mikroskopija","voda-analiza":"Analiza vode","bakterije-azotobacter":"Azotobacter bakterije","bakterije-clostridium":"Clostridium bakterije",temperatura:"Temperatura uzgoja",bolesti:"Bakterijske bolesti","fiksatori-dusika":"Fiksatori du≈°ika","mikrobiologija-kvantitativna":"Kvantitativna mikrobiologija",testovi:"Dijagnostiƒçki testovi",mediji:"Hranjivi mediji"};function L(){j=setInterval(()=>{if(m>0){if(m--,M(),m<=300){const t=document.getElementById("timer");t&&t.classList.add("text-red-600")}}else j&&clearInterval(j),I()},1e3)}function M(){const t=Math.floor(m/60),n=m%60,e=document.getElementById("timer");e&&(e.textContent=`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`)}function S(){q=0,Object.keys(f).forEach(i=>{document.querySelectorAll(`input[name="${i}"]:checked`).length>0&&q++});const t=q/E*100,n=document.getElementById("progressBar"),e=document.getElementById("progressText");n&&(n.style.width=`${t}%`),e&&(e.textContent=`${q} / ${E} pitanja`)}document.addEventListener("DOMContentLoaded",function(){L(),document.querySelectorAll('input[type="checkbox"]').forEach(n=>{n.addEventListener("change",S)})});document.getElementById("quizForm")?.addEventListener("submit",function(t){t.preventDefault(),I()});function I(){j&&clearInterval(j);const t=Date.now(),n=Math.round((t-T)/1e3);let e=0,i=0;const r={},a={};Object.keys(f).forEach(u=>{const b=Array.from(document.querySelectorAll(`input[name="${u}"]:checked`)).map(k=>k.value),g=f[u].length,x=f[u].filter(k=>b.includes(k)).length;let p=0,B=!1;b.length===0?p=0:x===g&&b.length===g?(p=g,B=!0):p=Math.max(0,x-(b.length-x)*.5),r[u]={score:p,maxScore:g,isCorrect:B,selected:b,correct:f[u]};const v=z[u];a[v]||(a[v]={correct:0,total:0}),a[v].total+=g,a[v].correct+=p,e+=p,i+=g});const l=i>0?Math.round(e/i*100):0,d=document.getElementById("correctAnswers"),s=document.getElementById("totalQuestions"),c=document.getElementById("percentage"),o=document.getElementById("resultMessage");d&&(d.textContent=e.toFixed(1)),s&&(s.textContent=i.toString()),c&&(c.textContent=l.toString()),o&&(l===100?(o.innerHTML="<strong>Odliƒçno!</strong> Savr≈°eno ste odgovorili na sva pitanja! üèÜ",o.className="text-lg text-green-700 mb-6"):l>=80?(o.innerHTML="<strong>Vrlo dobro!</strong> Imate odliƒçno znanje iz bakteriologije! üéØ",o.className="text-lg text-green-600 mb-6"):l>=60?(o.innerHTML="<strong>Dobro!</strong> Imate solidno znanje iz bakteriologije. üìö",o.className="text-lg text-blue-700 mb-6"):l>=40?(o.innerHTML="<strong>Prosjecno.</strong> Preporuƒçujemo da ponovno proƒçitate gradivo. üìñ",o.className="text-lg text-yellow-700 mb-6"):(o.innerHTML="<strong>Potrebno je vi≈°e uƒçenja.</strong> Vratite se na gradivo i ponovno proƒçitajte. üîç",o.className="text-lg text-red-700 mb-6")),C(a,r,n),$(l,n);const h=document.getElementById("quizResults");h&&(h.classList.remove("hidden"),h.scrollIntoView({behavior:"smooth"}))}function C(t,n,e){const i=document.getElementById("categoryResults");i&&(i.innerHTML="",Object.entries(t).forEach(([d,s])=>{const c=Math.round(s.correct/s.total*100),o=document.createElement("div");o.className="flex items-center justify-between p-3 bg-gray-50 rounded-lg",o.innerHTML=`
              <span class="font-medium text-gray-900">${A[d]||d}</span>
              <div class="flex items-center space-x-2">
                <span class="text-sm text-gray-600">${s.correct.toFixed(1)}/${s.total}</span>
                <span class="font-semibold ${c>=80?"text-green-600":c>=60?"text-yellow-600":"text-red-600"}">${c}%</span>
              </div>
            `,i.appendChild(o)}));const r=document.getElementById("questionByQuestion");r&&(r.innerHTML="",Object.entries(n).forEach(([d,s])=>{const c=d.replace("q",""),o=document.createElement("div");o.className=`flex items-center justify-between p-2 rounded ${s.isCorrect?"bg-green-50":"bg-red-50"}`,o.innerHTML=`
              <span class="text-sm">Pitanje ${c}</span>
              <span class="text-sm font-medium ${s.isCorrect?"text-green-600":"text-red-600"}">
                ${s.isCorrect?"‚úì Toƒçno":"‚úó Netoƒçno"} (${s.score.toFixed(1)}/${s.maxScore})
              </span>
            `,r.appendChild(o)}));const a=document.getElementById("timeAnalysis");if(a){const d=Math.floor(e/60),s=e%60,c=Math.round(e/E);a.innerHTML=`
            <p><strong>Ukupno vrijeme:</strong> ${d}m ${s}s</p>
            <p><strong>Prosjeƒçno vrijeme po pitanju:</strong> ${c}s</p>
            <p><strong>Preostalo vrijeme:</strong> ${Math.floor(m/60)}m ${m%60}s</p>
          `}const l=document.getElementById("detailedAnalytics");l&&l.classList.remove("hidden")}function $(t,n){let e=null;t===100?e=y.perfectScore:t>=90?e=y.goodScore:n<15*60?e=y.speedRunner:localStorage.getItem("quizAttempted")||(localStorage.setItem("quizAttempted","true"),e=y.firstTry),e&&w(e)}function w(t){const n=document.getElementById("badgeIcon"),e=document.getElementById("badgeTitle"),i=document.getElementById("badgeDescription"),r=document.getElementById("achievementBadge");n&&(n.textContent=t.icon),e&&(e.textContent=t.title),i&&(i.textContent=t.description),r&&r.classList.remove("hidden")}function D(){const t=document.getElementById("quizForm");t&&t.reset();const n=document.getElementById("quizResults");n&&n.classList.add("hidden");const e=document.getElementById("achievementBadge");e&&e.classList.add("hidden");const i=document.getElementById("detailedAnalytics");i&&i.classList.add("hidden");const r=document.getElementById("progressBar");r&&(r.style.width="0%");const a=document.getElementById("progressText");a&&(a.textContent="0/24"),window.scrollTo({top:0,behavior:"smooth"})}window.resetQuizGlobal=D;document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("mobile-menu-button"),n=document.getElementById("mobile-menu");t&&n&&t.addEventListener("click",function(){const e=this.getAttribute("aria-expanded")==="true";this.setAttribute("aria-expanded",(!e).toString()),n.classList.toggle("hidden")})});
