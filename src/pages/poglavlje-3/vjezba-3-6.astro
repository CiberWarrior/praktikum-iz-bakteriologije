---
import SubPageLayoutWithBase from "../../components/SubPageLayoutWithBase.astro";

export interface Props {
  title?: string;
  description?: string;
}

const { 
  title = 'Vje≈æba 3.6 - Bojenje acidorezistentnih bakterija po Ziehl-Neelsenu',
  description = 'Specifiƒçno bojenje za bakterije roda Mycobacterium'
} = Astro.props;
---

<SubPageLayoutWithBase chapterNumber={3} 
  title={title} 
  description={description}
  chapterNumber={3}
  primaryColor="red"
  breadcrumbPath={[
    { name: 'Poglavlje 3', url: '/poglavlje-3/' },
    { name: 'Vje≈æba 3.6 - Bojenje acidorezistentnih bakterija po Ziehl-Neelsenu', url: '/poglavlje-3/vjezba-3-6/' }
  ]}
>

  <!-- Main Content with Sidebar -->
  <div class="flex max-w-7xl mx-auto">
    
    <!-- Table of Contents Sidebar -->
    <aside class="hidden lg:block w-64 p-6 bg-gradient-to-b from-gray-50 to-gray-100 border-r border-gray-200 sticky top-0 h-screen overflow-y-auto shadow-lg">
      <div class="mb-6">
        <div class="flex items-center mb-6">
          <div class="w-8 h-8 bg-red-600 rounded-lg flex items-center justify-center mr-3">
            <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
            </svg>
          </div>
          <h3 class="text-xl font-bold text-gray-900">Sadr≈æaj stranice</h3>
        </div>
        
        <!-- Bookmark Button -->
        <button id="bookmark-btn" class="flex items-center space-x-3 text-sm text-gray-600 hover:text-red-600 transition-all duration-300 mb-6 p-3 rounded-lg hover:bg-red-50 w-full">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path>
          </svg>
          <span id="bookmark-text" class="font-medium">Oznaƒçiti kao bookmark</span>
        </button>
        
        <!-- Table of Contents -->
        <nav class="space-y-1">
          <div class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2">Sadr≈æaj stranice</div>
          <a href="#opis-metode" class="toc-link group flex items-center text-sm text-gray-600 hover:text-red-600 transition-all duration-300 py-2 px-3 rounded-lg hover:bg-red-50" data-target="opis-metode">
            <span class="w-2 h-2 bg-blue-400 rounded-full mr-3 transition-all duration-300"></span>
            Opis metode
          </a>
          <a href="#sastav-medija" class="toc-link group flex items-center text-sm text-gray-600 hover:text-red-600 transition-all duration-300 py-2 px-3 rounded-lg hover:bg-red-50" data-target="sastav-medija">
            <span class="w-2 h-2 bg-purple-400 rounded-full mr-3 transition-all duration-300"></span>
            Sastav medija
          </a>
          <a href="#slike" class="toc-link group flex items-center text-sm text-gray-600 hover:text-red-600 transition-all duration-300 py-2 px-3 rounded-lg hover:bg-red-50" data-target="slike">
            <span class="w-2 h-2 bg-green-400 rounded-full mr-3 transition-all duration-300"></span>
            Slike
          </a>
        </nav>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 px-6 py-8">
      <div class="max-w-4xl mx-auto">
        <div class="prose prose-lg max-w-none">
          
          <!-- Content Blocks -->
          <div class="space-y-8">
            
            <!-- Opis metode -->
            <div id="opis-metode" class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 shadow-lg border border-blue-200">
              <div class="flex items-center mb-4">
                <span class="text-3xl mr-4">üß™</span>
                <h3 class="text-2xl font-bold text-blue-900">Opis metode</h3>
              </div>
              <div class="bg-white rounded-lg p-6 shadow-sm">
                                <p class="text-gray-700 leading-relaxed">
                  Za bojenje u praktikumskoj nastavi preporuƒçuje se primjena nepatogenih mikobakterija, kao ≈°to je <em>Mycobacterium phei</em> (Slika 23). <em>Mycobacterium phei</em> uzgaja se na selektivnoj Lowenstein-Jensenovoj hranjivoj podlozi na 37¬∞C/72 h.
                </p>
                
                <p class="text-gray-700 leading-relaxed mt-4">
                  Medij se sterilizira 30 min na 121¬∞C, ohladi do 30¬∞C i doda mje≈°avina svje≈æih jaja. Potrebna je 1L mje≈°avine svje≈æih jaja, ne starijih od 1 tjedan (20-25 jaja). Jaja se mije≈°aju u prethodno steriliziranoj posudi. Za bojenje acidorezistentnih bakterija prva boja karbol fuksin nanese se preko razmaza fiksirane bakterijske kulture. Pridr≈æavajuƒái predmetno stakalce pincetom, preparat se zagrijava s donje strane iznad plamena dok boja ne poƒçne isparavati (oko 15 sek), a potom se odmakne u stranu da se ohladi. Nakon otprilike minutu zagrijavanje se ponavlja jo≈° dva puta (trokratno zagrijavanje). Zagrijani karbol fuksin prodire kroz vo≈°tani omotaƒç acidorezistentne bakterije. Nakon zagrijavanja preparat se ispere kiselim alkoholom sve dok ne prestane izlaziti crvena boja, a djelovanje alkohola prekida se ispiranjem pod mlazom vode. Kao kontrastno bojilo upotrebljava se metilensko modrilo koje ƒáe, naneseno preko razmaza obojiti stanice koje nisu acidorezistentne. Preparat se opet opere mlazom vode iz vodovoda, posu≈°i i mikroskopira. U preparatu vidjet ƒáe se crveno obojene acidorezistentne bakterije (slika 24).
                </p>
              </div>
            </div>

            <!-- Sastav medija -->
            <div class="bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 shadow-lg border border-purple-200">
              <div class="flex items-center mb-4">
                <span class="text-3xl mr-4">üß´</span>
                <h3 class="text-2xl font-bold text-purple-900">Sastav Lowenstein-Jensenova medija</h3>
              </div>
              <div class="bg-white rounded-lg p-6 shadow-sm">
                <div class="space-y-2 text-sm">
                  <div class="flex justify-between items-center py-1 border-b border-gray-100">
                    <span class="font-medium text-gray-700">KH<sub>2</sub>PO<sub>4</sub></span>
                    <span class="bg-purple-500 text-white px-2 py-1 rounded-full text-xs font-semibold">2,5 g</span>
                  </div>
                  <div class="flex justify-between items-center py-1 border-b border-gray-100">
                    <span class="font-medium text-gray-700">MgSO<sub>4</sub></span>
                    <span class="bg-purple-500 text-white px-2 py-1 rounded-full text-xs font-semibold">0,24 g</span>
                  </div>
                  <div class="flex justify-between items-center py-1 border-b border-gray-100">
                    <span class="font-medium text-gray-700">Mg-citrat</span>
                    <span class="bg-purple-500 text-white px-2 py-1 rounded-full text-xs font-semibold">0,6 g</span>
                  </div>
                  <div class="flex justify-between items-center py-1 border-b border-gray-100">
                    <span class="font-medium text-gray-700">L-asparagin</span>
                    <span class="bg-purple-500 text-white px-2 py-1 rounded-full text-xs font-semibold">3,6 g</span>
                  </div>
                  <div class="flex justify-between items-center py-1 border-b border-gray-100">
                    <span class="font-medium text-gray-700">Krumpirovo bra≈°no</span>
                    <span class="bg-purple-500 text-white px-2 py-1 rounded-full text-xs font-semibold">30,0 g</span>
                  </div>
                  <div class="flex justify-between items-center py-1 border-b border-gray-100">
                    <span class="font-medium text-gray-700">Malahitno zelenilo</span>
                    <span class="bg-green-500 text-white px-2 py-1 rounded-full text-xs font-semibold">0,4 g</span>
                  </div>
                  <div class="flex justify-between items-center py-1 border-b border-gray-100">
                    <span class="font-medium text-gray-700">Destilirana voda</span>
                    <span class="bg-purple-500 text-white px-2 py-1 rounded-full text-xs font-semibold">600 mL</span>
                  </div>
                  <div class="flex justify-between items-center py-1">
                    <span class="font-medium text-gray-700">pH</span>
                    <span class="bg-green-500 text-white px-2 py-1 rounded-full text-xs font-semibold">7,4 ¬± 0,1</span>
                  </div>
                </div>
              </div>
            </div>


            <!-- Karbol fuksin -->
            <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-6 shadow-lg border border-green-200">
              <div class="flex items-center mb-4">
                <span class="text-3xl mr-4">üß™</span>
                <h3 class="text-2xl font-bold text-green-900">Karbol fuksin</h3>
              </div>
              
              <div class="bg-white rounded-lg p-4 shadow-sm">
                <div class="bg-red-50 border-l-4 border-red-400 p-4 rounded-r-lg">
                  <details class="group">
                    <summary class="cursor-pointer font-semibold text-red-800 flex items-center">
                      <span class="mr-2">üß™</span>
                      Karbol fuksin
                      <span class="ml-auto transform group-open:rotate-180 transition-transform">‚ñº</span>
                    </summary>
                    <div class="mt-4 space-y-3 text-sm">
                      <div>
                        <strong class="text-red-800">Otopina A:</strong>
                        <ul class="ml-4 mt-1 space-y-1">
                          <li>Baziƒçni fuksin 0,3 g</li>
                          <li>Etanol (96%) 10,0 mL</li>
                        </ul>
                      </div>
                      <div>
                        <strong class="text-red-800">Otopina B:</strong>
                        <ul class="ml-4 mt-1 space-y-1">
                          <li>Fenol 5,0 g</li>
                          <li>Destilirana voda 95,0 mL</li>
                        </ul>
                      </div>
                      <div class="bg-yellow-50 p-3 rounded-lg">
                        <strong class="text-red-800">Postupak priprave:</strong><br/>
                        <em>Nakon priprave, pomije≈°ati otopine A i B.</em>
                      </div>
                    </div>
                  </details>
                </div>
              </div>
            </div>

            <!-- Slike -->
            <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-6 shadow-lg border border-green-200">
              <div class="bg-white rounded-lg p-6 shadow-sm">
                <!-- Slike 23 i 24 -->
                <div class="grid md:grid-cols-2 gap-6">
                  <figure class="image-figure bg-white rounded-lg p-4 shadow-sm">
                    <img 
                      src="/Images/slika23.jpg" 
                      alt="Slika 23 ‚Äì Kolonije Mycobacterium phei" 
                      class="w-3/5 h-auto rounded-lg mx-auto"
                      loading="lazy"
                    />
                    <figcaption class="mt-4 text-center">
                      <span class="inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium">
                      <span class="block mt-2 text-gray-700">Kolonije <em>Mycobacterium phei</em> porasle na Lowenstein-Jensenovu mediju</span>
                    </figcaption>
                  </figure>
                  
                  <figure class="image-figure bg-white rounded-lg p-4 shadow-sm">
                    <img 
                      src="/Images/slika24.jpg" 
                      alt="Slika 24 ‚Äì Stanice Mycobacterium phei" 
                      class="w-3/5 h-auto rounded-lg mx-auto"
                      loading="lazy"
                    />
                    <figcaption class="mt-4 text-center">
                      <span class="inline-block bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium">
                      <span class="block mt-2 text-gray-700">Stanice <em>Mycobacterium phei</em></span>
                    </figcaption>
                  </figure>
                </div>
              </div>
            </div>

          </div>

        </div>
      </div>
    </main>
  </div>

  <!-- Mobile TOC Toggle -->
  <button id="mobile-toc-toggle" class="lg:hidden fixed bottom-4 right-4 bg-red-600 text-white p-3 rounded-full shadow-lg z-50">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"></path>
    </svg>
  </button>

  <!-- Mobile TOC Overlay -->
  <div id="mobile-toc-overlay" class="lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 hidden">
    <div class="fixed right-0 top-0 h-full w-80 bg-white shadow-xl transform translate-x-full transition-transform duration-300" id="mobile-toc-panel">
      <div class="p-6">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-lg font-semibold text-gray-900">Brza navigacija</h3>
          <button id="mobile-toc-close" class="text-gray-500 hover:text-gray-700">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>
        
        <!-- Bookmark Button -->
        <button id="mobile-bookmark-btn" class="flex items-center space-x-2 text-sm text-gray-600 hover:text-red-600 transition-colors duration-200 mb-4 w-full">
          <svg id="mobile-bookmark-icon" class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path>
          </svg>
          <span id="mobile-bookmark-text">Oznaƒçiti kao bookmark</span>
        </button>
        
        <!-- Navigation Links -->
        <nav class="space-y-2">
          <a href="/poglavlje-3/" class="mobile-toc-link block text-sm text-gray-600 hover:text-red-600 transition-colors duration-200 py-2 border-l-2 border-transparent hover:border-red-600 pl-3">
            Pregled poglavlja
          </a>
          <a href="/sadrzaj/" class="mobile-toc-link block text-sm text-gray-600 hover:text-red-600 transition-colors duration-200 py-2 border-l-2 border-transparent hover:border-red-600 pl-3">
            Svi sadr≈æaji
          </a>
        </nav>
      </div>
    </div>
  </div>

  <script>
    // Bookmarks
    function initBookmarks() {
      const bookmarkKey = 'bookmark-vjezba-3-6';
      const bookmarkBtn = document.getElementById('bookmark-btn');
      const mobileBookmarkBtn = document.getElementById('mobile-bookmark-btn');
      const bookmarkText = document.getElementById('bookmark-text');
      const mobileBookmarkText = document.getElementById('mobile-bookmark-text');
      const bookmarkIcon = document.getElementById('mobile-bookmark-icon');
      
      function updateBookmarkUI(bookmarked: boolean) {
        const text = bookmarked ? 'Ukloniti iz bookmarka' : 'Oznaƒçiti kao bookmark';
        if (bookmarkText) bookmarkText.textContent = text;
        if (mobileBookmarkText) mobileBookmarkText.textContent = text;
      }
      
      function toggleBookmark() {
        const currentlyBookmarked = localStorage.getItem(bookmarkKey) === 'true';
        const newBookmarkState = !currentlyBookmarked;
        localStorage.setItem(bookmarkKey, newBookmarkState.toString());
        updateBookmarkUI(newBookmarkState);
      }
      
      if (bookmarkBtn) bookmarkBtn.addEventListener('click', toggleBookmark);
      if (mobileBookmarkBtn) mobileBookmarkBtn.addEventListener('click', toggleBookmark);
    }

    // Mobile TOC
    function initMobileTOC() {
      const toggleBtn = document.getElementById('mobile-toc-toggle');
      const overlay = document.getElementById('mobile-toc-overlay');
      const panel = document.getElementById('mobile-toc-panel');
      const closeBtn = document.getElementById('mobile-toc-close');
      const tocLinks = document.querySelectorAll('.mobile-toc-link');
      
      function openTOC() {
        if (overlay && panel) {
          overlay.classList.remove('hidden');
          setTimeout(() => {
            panel.classList.remove('translate-x-full');
          }, 10);
        }
      }
      
      function closeTOC() {
        if (panel && overlay) {
          panel.classList.add('translate-x-full');
          setTimeout(() => {
            overlay.classList.add('hidden');
          }, 300);
        }
      }
      
      if (toggleBtn) toggleBtn.addEventListener('click', openTOC);
      if (closeBtn) closeBtn.addEventListener('click', closeTOC);
      if (overlay) {
        overlay.addEventListener('click', (e) => {
          if (e.target === overlay) closeTOC();
        });
      }
      
      // Close TOC when clicking on a link
      tocLinks.forEach(link => {
        link.addEventListener('click', closeTOC);
      });
    }

    // Scroll Spy for TOC
    function initScrollSpy() {
      const sections = document.querySelectorAll('#opis-metode, #sastav-medija, #slike');
      const tocLinks = document.querySelectorAll('.toc-link');
      
      function updateActiveLink() {
        let currentSection = '';
        
        sections.forEach(section => {
          const rect = section.getBoundingClientRect();
          if (rect.top <= 100 && rect.bottom >= 100) {
            currentSection = section.id;
          }
        });
        
        // Remove active class from all links
        tocLinks.forEach(link => {
          link.classList.remove('active');
        });
        
        // Add active class to current section link
        if (currentSection) {
          const activeLink = document.querySelector(`[data-target="${currentSection}"]`);
          if (activeLink) {
            activeLink.classList.add('active');
          }
        }
      }
      
      // Listen for scroll events
      window.addEventListener('scroll', updateActiveLink);
      
      // Initial check
      updateActiveLink();
    }

    // Initialize everything
    document.addEventListener('DOMContentLoaded', () => {
      initBookmarks();
      initMobileTOC();
      initScrollSpy();
    });
  </script>

  <!-- Navigacijski gumbovi -->
  <div class="flex justify-between mt-16 mb-8 max-w-4xl mx-auto px-4 sm:px-6">
    <!-- Prethodna stranica -->
    <a
      href="/poglavlje-3/vjezba-3-5/"
      class="inline-flex items-center justify-center px-8 py-4 bg-gradient-to-r from-gray-600 to-gray-700 text-white font-semibold rounded-full shadow-lg hover:shadow-xl transition-all duration-300 no-underline transform hover:-translate-y-1"
      aria-label="Prijeƒëi na prethodnu stranicu: vje≈æba 3.5"
    >
      ‚Üê
      <span class="text-lg">vje≈æba 3.5</span>
    </a>
    
    <!-- Iduƒáa stranica -->
    <a
      href="/poglavlje-3/vjezba-3-7/"
      class="inline-flex items-center justify-center px-8 py-4 bg-gradient-to-r from-red-600 to-red-700 text-white font-semibold rounded-full shadow-lg hover:shadow-xl transition-all duration-300 no-underline transform hover:-translate-y-1"
      aria-label="Prijeƒëi na sljedeƒáu stranicu: vje≈æba 3.7"
    >
      <span class="text-lg">vje≈æba 3.7</span>
      ‚Üí
    </a>
  </div>

</SubPageLayoutWithBase>
