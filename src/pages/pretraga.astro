---
import BaseLayout from '../layouts/BaseLayout.astro';

export interface Props {
  title?: string;
  description?: string;
}

const { 
  title = 'Pretraga - Mrežni udžbenik iz bakteriologije',
  description = 'Pronađite sve što trebate o bakteriološkim tehnikama, vježbama i pojmovima.'
} = Astro.props;
---

<BaseLayout 
  title={title}
  description={description}
  keywords={['pretraga', 'bakteriologija', 'tehnike', 'vježbe', 'pojmovi', 'laboratorij']}
>
  <!-- Custom styles for enhanced animations -->
  <style>
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    .animate-fade-in-up {
      animation: fadeInUp 0.6s ease-out forwards;
    }
    
    .animate-slide-in {
      animation: slideIn 0.4s ease-out forwards;
    }
    
    .search-result-item {
      opacity: 0;
      animation: fadeInUp 0.6s ease-out forwards;
    }
    
    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: #f1f5f9;
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb {
      background: linear-gradient(to bottom, #3b82f6, #8b5cf6);
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(to bottom, #2563eb, #7c3aed);
    }
    
    /* Enhanced focus styles */
    #searchInput:focus {
      box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1), 0 0 0 1px rgba(59, 130, 246, 0.2);
    }
    
    /* Gradient text animation */
    .gradient-text {
      background: linear-gradient(-45deg, #3b82f6, #8b5cf6, #06b6d4, #10b981);
      background-size: 400% 400%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: gradientShift 3s ease infinite;
    }
    
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
  </style>

    <!-- Header -->
    <section class="bg-gradient-to-r from-purple-600 to-blue-600 text-white py-16">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 text-center">
        <div class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-6">
          <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
        </div>
        <h1 class="text-4xl md:text-5xl font-bold mb-4">Pretraga</h1>
        <p class="text-xl md:text-2xl opacity-90 max-w-3xl mx-auto">
          Pronađite sve što trebate o bakteriološkim tehnikama, vježbama i pojmovima.
        </p>
      </div>
    </section>

    <!-- Search Section -->
    <section class="py-16 bg-gradient-to-b from-gray-800 to-gray-900 relative">
      <!-- Background pattern -->
      <div class="absolute inset-0 opacity-5">
        <div class="absolute inset-0" style="background-image: radial-gradient(circle at 1px 1px, rgba(59, 130, 246, 0.3) 1px, transparent 0); background-size: 20px 20px;"></div>
      </div>
      
      <div class="relative max-w-6xl mx-auto px-4 sm:px-6">
        <div class="bg-gray-800/80 backdrop-blur-sm rounded-2xl shadow-2xl border border-gray-700/50 p-8 md:p-12">
          <!-- Search Input -->
          <div class="relative mb-8">
            <div class="relative group">
              <input
                type="text"
                id="searchInput"
                placeholder="Upišite pojam za pretragu (npr. gram, sterilizacija, bakterije)..."
                class="w-full px-8 py-6 pl-16 pr-8 text-lg border-2 border-gray-600 rounded-2xl focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-300 bg-gray-700/90 backdrop-blur-sm shadow-lg group-hover:shadow-xl text-white placeholder-gray-300"
              />
              <svg class="absolute left-6 top-6 w-7 h-7 text-gray-400 group-focus-within:text-blue-500 transition-colors duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
              </svg>
              <!-- Search suggestions indicator -->
              <div class="absolute right-6 top-6 hidden group-focus-within:block">
                <div class="w-2 h-2 bg-blue-500 rounded-full animate-pulse"></div>
              </div>
            </div>
            
              <!-- Advanced Filters -->
              <div class="mt-6 p-6 bg-gradient-to-r from-gray-700/50 to-gray-600/50 rounded-xl border border-gray-600/50">
              <h3 class="text-lg font-semibold text-white mb-4 flex items-center">
                <svg class="w-5 h-5 text-blue-400 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path>
                </svg>
                Napredni filteri
              </h3>
              
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                <!-- Type Filter -->
                <div>
                  <label class="block text-sm font-medium text-gray-300 mb-2">Tip sadržaja</label>
                  <select id="typeFilter" class="w-full px-3 py-2 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm bg-gray-700 text-white">
                    <option value="all">Svi tipovi</option>
                    <option value="poglavlje">Poglavlja</option>
                    <option value="vjezba">Vježbe</option>
                    <option value="quiz">Kvizovi</option>
                    <option value="rječnik">Rječnik</option>
                  </select>
                </div>
                
                <!-- Sort Filter -->
                <div>
                  <label class="block text-sm font-medium text-gray-300 mb-2">Sortiranje</label>
                  <select id="sortFilter" class="w-full px-3 py-2 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm bg-gray-700 text-white">
                    <option value="relevance">Relevantnost</option>
                    <option value="title">Naslov (A-Z)</option>
                    <option value="date">Datum</option>
                  </select>
                </div>
                
                <!-- Chapter Filter -->
                <div>
                  <label class="block text-sm font-medium text-gray-300 mb-2">Poglavlje</label>
                <select id="chapterFilter" class="w-full px-3 py-2 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm bg-gray-700 text-white">
                  <option value="all">Sva poglavlja</option>
                  <option value="1">Poglavlje 1 - Uvod u bakteriološki praktikum</option>
                  <option value="2">Poglavlje 2 - Sterilizacija</option>
                  <option value="3">Poglavlje 3 - Bojenje bakterija</option>
                  <option value="4">Poglavlje 4 - Pokretljivost bakterija</option>
                  <option value="5">Poglavlje 5 - Biokemijska svojstva bakterija</option>
                  <option value="6">Poglavlje 6 - Određivanje broja bakterija</option>
                  <option value="7">Poglavlje 7 - Escherichia coli</option>
                  <option value="8">Poglavlje 8 - Enterokoki</option>
                  <option value="9">Poglavlje 9 - Saprofitske bakterije</option>
                  <option value="10">Poglavlje 10 - Koliformne bakterije</option>
                  <option value="11">Poglavlje 11 - Gram pozitivne bakterije</option>
                  <option value="12">Poglavlje 12 - Anaerobne bakterije</option>
                  <option value="13">Poglavlje 13 - Antibiogram i aromatogram</option>
                  <option value="14">Poglavlje 14 - Test toksičnosti</option>
                  <option value="15">Poglavlje 15 - Testovi s metilenskim modrilom</option>
                  <option value="16">Poglavlje 16 - Bakterije mliječne fermentacije</option>
                  <option value="17">Poglavlje 17 - Amilolitičke bakterije</option>
                  <option value="18">Poglavlje 18 - Biogeokemijski ciklus dušika</option>
                  <option value="19">Poglavlje 19 - Biogeokemijski ciklus sumpora</option>
                  <option value="20">Poglavlje 20 - Biogeokemijski ciklus fosfora</option>
                  <option value="21">Poglavlje 21 - Metoda otiska</option>
                  <option value="22">Poglavlje 22 - Streptomiceti</option>
                  <option value="23">Poglavlje 23 - Purpurne sumporne bakterije</option>
                </select>
                </div>
              </div>
              
              <!-- Search tips -->
              <div class="flex flex-wrap gap-2 items-center">
                <span class="text-sm text-gray-300 font-medium">Popularne pretrage:</span>
                <button class="px-3 py-1 text-xs bg-blue-600/20 text-blue-300 rounded-full hover:bg-blue-600/30 transition-colors duration-200 border border-blue-500/30" onclick="const input1 = document.getElementById('searchInput'); if (input1) { input1.value='gram'; input1.dispatchEvent(new Event('input')); }">
                  gram
                </button>
                <button class="px-3 py-1 text-xs bg-purple-600/20 text-purple-300 rounded-full hover:bg-purple-600/30 transition-colors duration-200 border border-purple-500/30" onclick="const input2 = document.getElementById('searchInput'); if (input2) { input2.value='sterilizacija'; input2.dispatchEvent(new Event('input')); }">
                  sterilizacija
                </button>
                <button class="px-3 py-1 text-xs bg-green-600/20 text-green-300 rounded-full hover:bg-green-600/30 transition-colors duration-200 border border-green-500/30" onclick="const input3 = document.getElementById('searchInput'); if (input3) { input3.value='bakterije'; input3.dispatchEvent(new Event('input')); }">
                  bakterije
                </button>
                <button class="px-3 py-1 text-xs bg-orange-600/20 text-orange-300 rounded-full hover:bg-orange-600/30 transition-colors duration-200 border border-orange-500/30" onclick="const input4 = document.getElementById('searchInput'); if (input4) { input4.value='mikroskopija'; input4.dispatchEvent(new Event('input')); }">
                  mikroskopija
                </button>
              </div>
            </div>
          </div>

          <!-- Search Results -->
          <div id="searchResults" class="space-y-6">
            <!-- Initial content -->
            <div id="initialContent" class="hidden">
            </div>

            <!-- Results container -->
            <div id="resultsContainer" class="hidden">
              <div class="flex items-center justify-between mb-6 p-4 bg-gradient-to-r from-gray-700/50 to-gray-600/50 rounded-xl border border-gray-600/50">
                <h3 id="resultsCount" class="text-lg font-semibold text-white flex items-center">
                  <svg class="w-5 h-5 text-blue-400 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                  </svg>
                  <span id="resultsCountText"></span>
                </h3>
                <button id="clearSearch" class="px-4 py-2 text-sm bg-gradient-to-r from-gray-600 to-gray-700 text-white rounded-lg hover:from-gray-700 hover:to-gray-800 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5">
                  <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                  </svg>
                  Očisti pretragu
                </button>
              </div>
              <div id="resultsList" class="space-y-6"></div>
            </div>

            <!-- No results -->
            <div id="noResults" class="hidden text-center py-12">
              <div class="w-24 h-24 bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-6">
                <svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                </svg>
              </div>
              <h3 class="text-xl font-semibold text-gray-300 mb-2">Nema rezultata za vašu pretragu</h3>
              <p class="text-gray-400 mb-4">Pokušajte s drugim pojmom ili provjerite pravopis.</p>
              <div class="flex flex-wrap gap-2 justify-center">
                <span class="text-sm text-gray-400">Preporučujemo:</span>
                <button class="px-3 py-1 text-xs bg-blue-600/20 text-blue-300 rounded-full hover:bg-blue-600/30 transition-colors duration-200 border border-blue-500/30" onclick="const input5 = document.getElementById('searchInput'); if (input5) { input5.value='bakterije'; input5.dispatchEvent(new Event('input')); }">
                  bakterije
                </button>
                <button class="px-3 py-1 text-xs bg-purple-600/20 text-purple-300 rounded-full hover:bg-purple-600/30 transition-colors duration-200 border border-purple-500/30" onclick="const input6 = document.getElementById('searchInput'); if (input6) { input6.value='laboratorij'; input6.dispatchEvent(new Event('input')); }">
                  laboratorij
                </button>
                <button class="px-3 py-1 text-xs bg-green-600/20 text-green-300 rounded-full hover:bg-green-600/30 transition-colors duration-200 border border-green-500/30" onclick="const input7 = document.getElementById('searchInput'); if (input7) { input7.value='testovi'; input7.dispatchEvent(new Event('input')); }">
                  testovi
                </button>
              </div>
            </div>
          </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Quick Links -->
    <section class="py-20 bg-gradient-to-b from-gray-800 to-gray-900 relative overflow-hidden">
      <!-- Background decoration -->
      <div class="absolute top-0 right-0 w-96 h-96 bg-blue-600/10 rounded-full blur-3xl -translate-y-48 translate-x-48"></div>
      <div class="absolute bottom-0 left-0 w-80 h-80 bg-purple-600/10 rounded-full blur-3xl translate-y-40 -translate-x-40"></div>
      
      <div class="relative max-w-6xl mx-auto px-4 sm:px-6">
        <div class="text-center mb-16">
          <h2 class="text-4xl md:text-5xl font-bold text-white mb-4">
            Brzi pristup
          </h2>
          <p class="text-xl text-gray-300 max-w-2xl mx-auto">
            Koristite ove veze za brzo pronalaženje sadržaja koji vas zanima
          </p>
        </div>
        
        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
          <a href="/sadrzaj/" class="group p-8 bg-gray-800/80 backdrop-blur-sm rounded-2xl hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-2 border border-gray-700/50 hover:border-blue-500/50">
            <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-300 shadow-lg">
              <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
              </svg>
            </div>
            <h3 class="text-xl font-bold text-white mb-3 text-center group-hover:text-blue-400 transition-colors duration-300">Sadržaj</h3>
            <p class="text-gray-300 text-center leading-relaxed">Pregled svih poglavlja i struktura udžbenika</p>
            <div class="mt-4 flex items-center justify-center text-blue-400 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
              <span class="text-sm font-medium mr-1">Pogledaj</span>
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            </div>
          </a>
          
          <a href="/rječnik/" class="group p-8 bg-gray-800/80 backdrop-blur-sm rounded-2xl hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-2 border border-gray-700/50 hover:border-purple-500/50">
            <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-300 shadow-lg">
              <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
              </svg>
            </div>
            <h3 class="text-xl font-bold text-white mb-3 text-center group-hover:text-purple-400 transition-colors duration-300">Rječnik</h3>
            <p class="text-gray-300 text-center leading-relaxed">Rječnik pojmova i definicija</p>
            <div class="mt-4 flex items-center justify-center text-purple-400 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
              <span class="text-sm font-medium mr-1">Pogledaj</span>
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            </div>
          </a>
          
          <a href="/o-nama/" class="group p-8 bg-gray-800/80 backdrop-blur-sm rounded-2xl hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-2 border border-gray-700/50 hover:border-green-500/50">
            <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-300 shadow-lg">
              <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
              </svg>
            </div>
            <h3 class="text-xl font-bold text-white mb-3 text-center group-hover:text-green-400 transition-colors duration-300">O nama</h3>
            <p class="text-gray-300 text-center leading-relaxed">Saznajte više o timu i projektu</p>
            <div class="mt-4 flex items-center justify-center text-green-400 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
              <span class="text-sm font-medium mr-1">Pogledaj</span>
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            </div>
          </a>
          
          <a href="/" class="group p-8 bg-gray-800/80 backdrop-blur-sm rounded-2xl hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-2 border border-gray-700/50 hover:border-orange-500/50">
            <div class="w-16 h-16 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-300 shadow-lg">
              <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
              </svg>
            </div>
            <h3 class="text-xl font-bold text-white mb-3 text-center group-hover:text-orange-400 transition-colors duration-300">Početna</h3>
            <p class="text-gray-300 text-center leading-relaxed">Povratak na početnu stranicu</p>
            <div class="mt-4 flex items-center justify-center text-orange-400 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
              <span class="text-sm font-medium mr-1">Pogledaj</span>
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            </div>
          </a>
        </div>
      </div>
    </section>


    <!-- Advanced Search Script -->
    <script>
      document.addEventListener('DOMContentLoaded', async function() {

        // Initialize simple search immediately
        console.log('Initializing search...');
        
        // Initialize search with the search input
        const searchInput = document.getElementById('searchInput');
        const resultsContainer = document.getElementById('resultsContainer');
        const noResults = document.getElementById('noResults');
        const resultsCountText = document.getElementById('resultsCountText');
        const resultsList = document.getElementById('resultsList');
        const clearSearch = document.getElementById('clearSearch');
        
        // Filter elements
        const typeFilter = document.getElementById('typeFilter') as HTMLSelectElement;
        const sortFilter = document.getElementById('sortFilter') as HTMLSelectElement;
        const chapterFilter = document.getElementById('chapterFilter') as HTMLSelectElement;

        // Simple search data - comprehensive list
        const searchData = [
          {
            title: 'Uvod u bakteriološki praktikum',
            content: 'Aseptika, sigurnost rada, osnovne tehnike, laboratorijski pribor, dezinfekcija, antisepsa, prva pomoć',
            url: '/poglavlje-1/',
            type: 'poglavlje',
            tags: ['aseptika', 'sigurnost', 'osnove', 'laboratorij', 'dezinfekcija']
          },
          {
            title: 'Sterilizacija',
            content: 'Sterilizacija, dezinfekcija, antisepsa, autoklaviranje, suha sterilizacija, UV sterilizacija, kemijska sterilizacija',
            url: '/poglavlje-2/',
            type: 'poglavlje',
            tags: ['sterilizacija', 'dezinfekcija', 'antisepsa', 'autoklaviranje', 'kontrola']
          },
          {
            title: 'Bojenje bakterija',
            content: 'Gram bojenje, bojenje endospora, kapsule, flagela, negativno bojenje, fiksiranje, mikroskopija, diferencijalno bojenje',
            url: '/poglavlje-3/',
            type: 'poglavlje',
            tags: ['gram', 'bojenje', 'endospore', 'kapsule', 'flagele', 'mikroskopija']
          },
          {
            title: 'Pokretljivost bakterija',
            content: 'Pokretljivost, flagele, bičevi, motorni aparat, pokretljivost testovi, semisolidni agar',
            url: '/poglavlje-4/',
            type: 'poglavlje',
            tags: ['pokretljivost', 'flagele', 'bičevi', 'motorni aparat', 'testovi']
          },
          {
            title: 'Biokemijska svojstva bakterija',
            content: 'Biokemijski testovi, indol test, MR-VP test, katalaza, oksidaza, identifikacija bakterija',
            url: '/poglavlje-5/',
            type: 'poglavlje',
            tags: ['biokemijski', 'testovi', 'indol', 'katalaza', 'identifikacija']
          },
          {
            title: 'Određivanje broja bakterija',
            content: 'Brojanje bakterija, decimalno razrjeđenje, CFU, titar, statistika, hemacitometar',
            url: '/poglavlje-6/',
            type: 'poglavlje',
            tags: ['brojanje', 'cfu', 'titar', 'kvantitativno', 'statistika']
          },
          {
            title: 'Escherichia coli',
            content: 'E. coli, EC-X-GLUC agar, Endo agar, MacConkey, identifikacija, analiza vode, fekalno zagađenje',
            url: '/poglavlje-7/',
            type: 'poglavlje',
            tags: ['e.coli', 'escherichia', 'endo', 'macconkey', 'voda', 'fekalno']
          },
          {
            title: 'Enterokoki',
            content: 'Crijevni enterokoki, gram pozitivne bakterije, analiza vode, identifikacija, Streptococcus faecalis',
            url: '/poglavlje-8/',
            type: 'poglavlje',
            tags: ['enterokoki', 'gram pozitivne', 'voda', 'crijevni', 'streptococcus']
          },
          {
            title: 'Saprofitske bakterije',
            content: 'Ukupne saprofitske bakterije, analiza vode, brojanje, hranjivi agar, ukupan broj bakterija',
            url: '/poglavlje-9/',
            type: 'poglavlje',
            tags: ['saprofitske', 'voda', 'brojanje', 'hranjivi agar', 'heterotrofne']
          },
          {
            title: 'Koliformne bakterije',
            content: 'Koliformi, analiza vode, laktozni pozitivni, identifikacija, fekalno zagađenje',
            url: '/poglavlje-10/',
            type: 'poglavlje',
            tags: ['koliformi', 'laktoza', 'voda', 'analiza', 'fekalno']
          },
          {
            title: 'Gram pozitivne bakterije',
            content: 'Gram pozitivne bakterije, stafilokoki, streptokoki, laktobacili, identifikacija',
            url: '/poglavlje-11/',
            type: 'poglavlje',
            tags: ['gram pozitivne', 'stafilokoki', 'streptokoki', 'laktobacili']
          },
          {
            title: 'Anaerobne bakterije',
            content: 'Anaerobne bakterije, klostridije, identifikacija, anaerobni uvjeti, kultura',
            url: '/poglavlje-12/',
            type: 'poglavlje',
            tags: ['anaerobne', 'klostridije', 'anaerobni', 'kultura']
          },
          {
            title: 'Antibiogram i aromatogram',
            content: 'Antibiogram, aromatogram, osjetljivost na antibiotike, testovi osjetljivosti, rezistencija',
            url: '/poglavlje-13/',
            type: 'poglavlje',
            tags: ['antibiogram', 'aromatogram', 'antibiotici', 'osjetljivost', 'rezistencija']
          },
          {
            title: 'Test toksičnosti',
            content: 'Test toksičnosti, toksini, bakterijski toksini, testiranje toksičnosti, sigurnost',
            url: '/poglavlje-14/',
            type: 'poglavlje',
            tags: ['toksičnost', 'toksini', 'bakterijski', 'testiranje', 'sigurnost']
          },
          {
            title: 'Testovi s metilenskim modrilom',
            content: 'Metilensko modrilo, TTC test, HIL test, testovi s bojama, indikatori',
            url: '/poglavlje-15/',
            type: 'poglavlje',
            tags: ['metilensko modrilo', 'ttc', 'hil', 'boje', 'indikatori']
          },
          {
            title: 'Bakterije mliječne fermentacije',
            content: 'Mliječna fermentacija, laktobacili, fermentacija, mliječni proizvodi',
            url: '/poglavlje-16/',
            type: 'poglavlje',
            tags: ['mliječna fermentacija', 'laktobacili', 'fermentacija', 'mliječni']
          },
          {
            title: 'Amilolitičke bakterije',
            content: 'Amilolitičke bakterije, razgradnja škroba, amilaza, ugljikohidrati',
            url: '/poglavlje-17/',
            type: 'poglavlje',
            tags: ['amilolitičke', 'škrob', 'amilaza', 'ugljikohidrati']
          },
          {
            title: 'Biogeokemijski ciklus dušika',
            content: 'Dušik, nitrifikatori, denitrifikatori, amonifikatori, fiksatori dušika',
            url: '/poglavlje-18/',
            type: 'poglavlje',
            tags: ['dušik', 'nitrifikatori', 'denitrifikatori', 'amonifikatori']
          },
          {
            title: 'Biogeokemijski ciklus sumpora',
            content: 'Sumpor, sulfat reducirajuće bakterije, sumporovodik, biogeokemijski ciklusi',
            url: '/poglavlje-19/',
            type: 'poglavlje',
            tags: ['sumpor', 'sulfat', 'sumporovodik', 'ciklusi']
          },
          {
            title: 'Biogeokemijski ciklus fosfora',
            content: 'Fosfor, fosfat akumulirajuće bakterije, fosfomobilizatori, minerali',
            url: '/poglavlje-20/',
            type: 'poglavlje',
            tags: ['fosfor', 'fosfat', 'akumulacija', 'minerali']
          },
          {
            title: 'Metoda otiska',
            content: 'Metoda otiska, otisci, identifikacija bakterija, tehnike uzorkovanja',
            url: '/poglavlje-21/',
            type: 'poglavlje',
            tags: ['otisci', 'uzorkovanje', 'identifikacija', 'tehnike']
          },
          {
            title: 'Streptomiceti',
            content: 'Streptomiceti, antibiotici, razgradnja celuloze, aktinomiceti',
            url: '/poglavlje-22/',
            type: 'poglavlje',
            tags: ['streptomiceti', 'antibiotici', 'celuloza', 'aktinomiceti']
          },
          {
            title: 'Purpurne sumporne bakterije',
            content: 'Purpurne sumporne bakterije, fotosinteza, sumpor, anaerobni uvjeti',
            url: '/poglavlje-23/',
            type: 'poglavlje',
            tags: ['purpurne', 'sumporne', 'fotosinteza', 'anaerobni']
          }
        ];

        if (searchInput) {
          console.log('Search input found, adding event listener...');
          
          // Connect search input to simple search
          searchInput.addEventListener('input', function() {
            const query = (this as HTMLInputElement).value.trim();
            console.log('Search query:', query);
            
            if (query.length < 2) {
              hideAllResults();
              return;
            }

            // Perform simple search
            const searchTerm = query.toLowerCase();
            let results = searchData.filter((item: any) => {
              const titleMatch = item.title.toLowerCase().includes(searchTerm);
              const contentMatch = item.content.toLowerCase().includes(searchTerm);
              const tagsMatch = item.tags.some((tag: string) => tag.toLowerCase().includes(searchTerm));
              
              return titleMatch || contentMatch || tagsMatch;
            });

            // Apply filters
            if (typeFilter && typeFilter.value !== 'all') {
              results = results.filter((item: any) => item.type === typeFilter.value);
            }

            if (chapterFilter && chapterFilter.value !== 'all') {
              results = results.filter((item: any) => item.url.includes(`poglavlje-${chapterFilter.value}`));
            }

            // Apply sorting
            if (sortFilter && sortFilter.value === 'title') {
              results.sort((a: any, b: any) => a.title.localeCompare(b.title));
            }

            console.log('Search results:', results);
            displaySimpleResults(results, query);
          });

            // Search on Enter key
            searchInput.addEventListener('keypress', function(e) {
              if (e.key === 'Enter') {
                const query = (this as HTMLInputElement).value.trim();
                if (query.length >= 2) {
                  this.dispatchEvent(new Event('input'));
                }
              }
            });
          }

          // Clear search functionality
          if (clearSearch) {
            clearSearch.addEventListener('click', function() {
              if (searchInput) {
                (searchInput as HTMLInputElement).value = '';
                hideAllResults();
              }
            });
          }

          // Filter change listeners
          [typeFilter, sortFilter, chapterFilter].forEach(filter => {
            if (filter) {
              filter.addEventListener('change', function() {
                if (searchInput && (searchInput as HTMLInputElement).value.trim().length >= 2) {
                  searchInput.dispatchEvent(new Event('input'));
                }
              });
            }
          });

          // Helper functions
          function displaySimpleResults(results: any[], query: string) {
            console.log('Displaying results:', results);
            
            if (results.length === 0) {
              showNoResults();
              return;
            }

            // Hide no results
            if (noResults) noResults.classList.add('hidden');

            // Show results
            if (resultsContainer) resultsContainer.classList.remove('hidden');
            if (resultsCountText) resultsCountText.textContent = `Pronađeno ${results.length} rezultata za "${query}"`;

            // Render results with enhanced styling
            if (resultsList) resultsList.innerHTML = results.map((item: any, index: number) => `
              <div class="search-result-item bg-gray-800/90 backdrop-blur-sm rounded-2xl border border-gray-700/50 p-8 hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-1 hover:border-blue-500/50 group" style="animation-delay: ${index * 150}ms">
                <div class="flex items-start justify-between">
                  <div class="flex-1">
                    <div class="flex items-center mb-4">
                      <span class="inline-flex items-center px-3 py-1.5 rounded-full text-sm font-semibold bg-gradient-to-r from-blue-600/20 to-purple-600/20 text-blue-300 mr-3 shadow-sm border border-blue-500/30">
                        <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        ${item.type}
                      </span>
                      <h3 class="text-2xl font-bold text-white group-hover:text-blue-400 transition-colors duration-300">${item.title}</h3>
                    </div>
                    <p class="text-gray-300 mb-6 text-lg leading-relaxed">${item.content}</p>
                    <div class="flex flex-wrap gap-2 mb-6">
                      ${item.tags.map((tag: string) => `
                        <span class="px-3 py-1.5 bg-gradient-to-r from-gray-700/50 to-gray-600/50 text-gray-300 text-sm rounded-full hover:from-blue-600/20 hover:to-purple-600/20 hover:text-blue-300 transition-all duration-200 cursor-default border border-gray-600/30">${tag}</span>
                      `).join('')}
                    </div>
                    <a href="${item.url}" class="inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5">
                      <span>Pogledaj detalje</span>
                      <svg class="w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                      </svg>
                    </a>
                  </div>
                </div>
              </div>
            `).join('');
          }

          function hideAllResults() {
            if (resultsContainer) resultsContainer.classList.add('hidden');
            if (noResults) noResults.classList.add('hidden');
          }

          function showNoResults() {
            if (resultsContainer) resultsContainer.classList.add('hidden');
            if (noResults) noResults.classList.remove('hidden');
          }
      });

    </script>
</BaseLayout>